{% extends 'layout.html' %}

{% block content %}
    <div class="content">
        <h1>Welcome {{ session['username'] }}</h1>
        
        <h2>Available Files</h2>
        
        <!-- Table to display files -->
        <table class="file-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Filename</th>
                    <th>Filetype</th>
                    <th>Uploader</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for file in files %}
                    <tr>
                        <td>{{ file.id }}</td>
                        <td><a href="{{ url_for('download_file', file_id=file.id) }}">{{ file.filename }}</a></td>
                        <td>{{ file.filetype }}</td>
                        <td>{{ file.uploader }}</td>
                        <td>
                            {% if file.uploader == session['username'] %}
                                <a href="{{ url_for('delete_file', file_id=file.id) }}">Delete</a>
                            {% else %}
                                <a href="{{ url_for('download_file', file_id=file.id) }}">Download</a>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}

